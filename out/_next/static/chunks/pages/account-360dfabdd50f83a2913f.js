_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"5xsU":function(e,t,n){"use strict";n.r(t),function(e){var a=n("1OyB"),r=n("vuIU"),l=n("Ji7U"),s=n("md7G"),c=n("foSv"),u=n("q1tI"),o=n.n(u),i=n("8Kt/"),d=n.n(i),m=n("EfCc"),f=n("ZHqB"),p=n("pI11"),h=n("YFqc"),v=n.n(h),y=n("wd/R"),g=n.n(y),b=n("/MKj"),N=n("nOHt"),_=n.n(N),w=o.a.createElement;function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var O=function(t){Object(l.a)(s,t);var n=k(s);function s(e){var t;return Object(a.a)(this,s),(t=n.call(this,e)).state={isError:!1,message:null,orders:[]},t}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.verifyAuth()}},{key:"verifyAuth",value:function(){return _.a.push("/")}},{key:"formatDate",value:function(e,t){var n=g.a.unix(e);return n.isValid?n.format("MMM Do Y"):null}},{key:"customerSince",value:function(){return null===this.formatDate(this.props.customer.created)?null:w("small",null,w("strong",null,"Customer since:")," ",this.formatDate(this.props.customer.created))}},{key:"getOrders",value:function(){this.setState({isError:!0,message:["Opps, looks like an error occurred!"]})}},{key:"getFulfillmentStatus",value:function(e){return e&&"fulfilled"===e?w("span",{className:"badge badge-primary"},"Fullfilled"):w("span",{className:"badge badge-secondary"},"Processing")}},{key:"getPaymentStatus",value:function(e){return e?"not-paid"===e?w("span",{className:"badge badge-warning"},"Not paid"):"paid"===e?w("span",{className:"badge badge-success"},"Paid"):"refunded"===e?w("span",{className:"badge badge-danger"},"Refunded"):w("span",{className:"badge badge-secondary"},"Pending"):w("span",{className:"badge badge-secondary"},"Pending")}},{key:"renderShippingAddress",value:function(){var e=this.state.orders;if(!e||!e.length)return w("div",null,"You havent placed an order yet!");var t=this.state.orders.data[0].shipping;return t?w("div",null,w("div",null,t.name),w("div",null,t.street),w("div",null,t.town_city,t.town_city&&t.county_state?",":""," ",t.county_state),w("div",null,t.country,t.country&&t.postal_zip_code?",":""," ",t.postal_zip_code)):null}},{key:"renderOrdersTable",value:function(){var t=this,n=this.state.orders;return!n||n.length?w("div",{className:"card text-center p-2"},w("p",null,"You haven't placed any orders yet!")):w("table",{className:"table table-bordered"},w("thead",null,w("tr",null,w("th",null,"Order"),w("th",null,"Payment"),w("th",null,"Fulfillment"),w("th",null,"Total"),w("th",null,"Actions"))),w("tbody",null,(0!==this.state.orders.length?this.state.orders.data:[]).map((function(n){return w("tr",{key:n.id},w("td",null,w("div",null,w(v.a,{href:"account/".concat(n.id),as:e.env.BACKEND_URL+"account/".concat(n.id)},w("a",null,"#",n.customer_reference))),w("small",{className:"text-muted"},t.formatDate(n.created))),w("td",null,t.getPaymentStatus(n.status_payment)),w("td",null,t.getFulfillmentStatus(n.status_fulfillment)),w("td",null,n.order_value.formatted_with_symbol),w("td",null,w(v.a,{href:"account/".concat(n.id),as:e.env.BACKEND_URL+"account/".concat(n.id)},w("a",null,"View order"))))}))))}},{key:"renderAlert",value:function(){var e=this.state,t=e.isError,n=e.message;if(!n)return null;var a=1===n.length?n[0]:w("ul",{className:"text-left m-0"},n.map((function(e){return w("li",{key:e},e)})));return w("div",{className:"alert ".concat(t?"alert-danger":"alert-success")},a)}},{key:"render",value:function(){if(!this.props.customer)return w(p.default,null);var e=this.props.customer,t=e.firstname,n=e.lastname,a=e.email;return w(m.a,null,w(d.a,null,w("title",null,"Account")),w("div",{className:"account-container"},w("div",{className:"custom-container py-5 my-4 my-sm-5"},w("div",{className:"row mt-4"},w("div",{className:"col-12"},w("h2",{className:"font-size-header mb-4 pt-5 text-center"},"My account"),this.renderAlert())),w("div",{className:"row mt-5 pt-5"},w("div",{className:"col-12 col-md-8 col-lg-8"},w("div",{className:"d-flex flex-row justify-content-between"},w("h5",null,"Order history"),this.customerSince()),this.renderOrdersTable()),w("div",{className:"col-12 col-md-4 col-lg-4 row-content"},w("div",{className:"card p-2 mt-6"},w("h5",{className:"mb-2"},t," ",n),w("a",{href:"mailto:".concat(a),target:"_blank",rel:"noopener noreferrer",className:"mb-2"},a),w("h6",null,"Shipping address"),this.renderShippingAddress()))))),w(f.a,null))}}]),s}(u.Component);t.default=Object(N.withRouter)(Object(b.b)((function(e){return{customer:e.customer}}))(O))}.call(this,n("8oxB"))},owYu:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return n("5xsU")}])}},[["owYu",2,1,4,7,0,3,5,8]]]);